<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_noelParado</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>estadoPlayer = "";

velocidad = 3;
moveH = 0;
moveV = 0;
salto = 15;
gravedad = 0.8;

saltando = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Move

left = -keyboard_check( vk_left);
right = keyboard_check( vk_right);
saltar = keyboard_check_pressed( vk_up);
sentado = keyboard_check( vk_down);

moveX = left + right;
moveH = moveX * velocidad;

//Colision horizontal contra paredes
if (place_meeting(x+moveH, y, o_baseNieve)){
    while(!place_meeting(x+sign(moveH),y, o_baseNieve)){
        x += sign(moveH);
    }
    moveH = 0;
}

//Control de estado de sprite horizontal
if( moveX !=0){estadoPlayer = "caminando";}
else{
    estadoPlayer = "parado"; 
}



//Salto
if(place_meeting(x,y+1, o_baseNieve)){
    if(saltar){
        moveV = -salto;
        //saltando = true;
    }
}

//if (saltando) estadoPlayer = "saltando";

//Gravedad
if(moveV &lt;20) &amp;&amp; !place_meeting(x ,y + 1, o_baseNieve){
    moveV += gravedad;
    
    estadoPlayer = "saltando";
}


//Colision vertical contra el suelo
if (place_meeting(x,y+moveV, o_baseNieve)){
    //Mientras no encontremos colision a 1px ajustamos de 1 en 1
    while ( !place_meeting(x, y + sign( moveV), o_baseNieve)){
        y += sign(moveV); 
    };
    
    moveV = 0;
}

y +=moveV;
x +=moveH;

//show_debug_message("estadoPlayer = " + estadoPlayer);
//show_debug_message("moveH = " + string(moveH));
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Estados player
switch (estadoPlayer)
{
    case "parado":
        sprite_index = spr_noelParado;
        image_speed = 0.05;
    break;
    
    case "caminando":
        sprite_index = spr_noelCaminando;
       
        //Espejado horizontal 
        if( moveX &lt; 0)image_xscale = -1 else
        if( moveX &gt; 0)image_xscale = 1;
        
        //Velocidad de imagenes
        image_speed = 0.1;
    break;
    
    case "saltando":
        image_index = -1;
        sprite_index = spr_noelSaltando;
        //image_speed = 0.1;
        
        if(image_index &gt; image_number - 1){
            //image_index = -1;
            sprite_index = spr_noelCayendo;
            //estadoPlayer = "cayendo";
            //image_speed = 0;
            image_index = -1;
        }
    break;
    
    case "cayendo":
        sprite_index = spr_noelCayendo;
        //if(image_index == image_number){
            //estadoPlayer = "parado";
            //saltando = false;
        //}
    break;
    
    //default: STATEMENT;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>32,32</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
